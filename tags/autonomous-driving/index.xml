<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Autonomous Driving on iteratively.io</title><link>https://iteratively.io/tags/autonomous-driving/</link><description>Recent content in Autonomous Driving on iteratively.io</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Sun, 24 Aug 2025 00:00:00 +0000</lastBuildDate><atom:link href="https://iteratively.io/tags/autonomous-driving/index.xml" rel="self" type="application/rss+xml"/><item><title>How Many Cars Would Waymo Need in Chicago?</title><link>https://iteratively.io/p/drt-chicago/</link><pubDate>Sun, 24 Aug 2025 00:00:00 +0000</pubDate><guid>https://iteratively.io/p/drt-chicago/</guid><description>&lt;img src="https://iteratively.io/p/drt-chicago/cover.jpg" alt="Featured image of post How Many Cars Would Waymo Need in Chicago?" />&lt;h2 id="-motivation">🚀 Motivation
&lt;/h2>&lt;p>Waymo is rapidly expanding across the United States, rolling out autonomous ride-hailing services in city after city. The ambitions are bold — but what does it take to realistically meet urban demand with autonomous vehicles?&lt;/p>
&lt;p>This blog post explores how &lt;strong>ride-hailing simulations with MATSim DRT Contrib&lt;/strong> can help cities, mobility strategists, and tech companies estimate the fleet size required to serve real-world demand. By simulating autonomous deployments, we gain actionable insights into what a Waymo-like service would need to operate effectively in a new urban environment.&lt;/p>
&lt;p>One city stands out: &lt;strong>Chicago&lt;/strong>. The City of Chicago provides a &lt;strong>highly detailed, continuously updated ride-hailing dataset&lt;/strong> — a true hidden gem that’s often overlooked in both academic and commercial circles. It offers a rare opportunity to analyze real booking behavior at scale.&lt;/p>
&lt;p>In this post, I’ll show you how to unlock the full potential of this dataset using &lt;strong>Java, Python, &lt;a class="link" href="https://matsim.org" target="_blank" rel="noopener"
>MATSim&lt;/a>, and &lt;a class="link" href="https://www.simunto.com/" target="_blank" rel="noopener"
>Simunto&lt;/a> software&lt;/strong>. We’ll dive deep into the data and explore how simulation can turn raw demand into strategic deployment decisions.&lt;/p>
&lt;hr>
&lt;h2 id="-input-data-real-ride-hailing-trips-from-chicago">📦 Input Data: Real Ride-Hailing Trips from Chicago
&lt;/h2>&lt;p>The foundation of this analysis is a public dataset provided by the &lt;strong>City of Chicago&lt;/strong>, titled &lt;a class="link" href="https://data.cityofchicago.org/Transportation/Transportation-Network-Providers-Trips-2025-/3q84-vs9b" target="_blank" rel="noopener"
>Transportation Network Providers - Trips (2025)&lt;/a>. It contains anonymized trip-level data from ride-hailing services like Uber and Lyft, and is published under &lt;strong>Public Domain&lt;/strong> — making it freely usable for both academic and commercial purposes.&lt;/p>
&lt;p>You can access the data in two ways:&lt;/p>
&lt;ul>
&lt;li>&lt;strong>CSV Archive Download&lt;/strong>: A full-year dump, currently around &lt;strong>12.5 GB&lt;/strong> of raw data for 2025.&lt;/li>
&lt;li>&lt;strong>API Access&lt;/strong>: Ideal for downloading specific days or weeks without handling the full dataset.&lt;/li>
&lt;/ul>
&lt;p>You can get a full overview of the provided attributes per trip check out this &lt;a class="link" href="https://data.cityofchicago.org/Transportation/Transportation-Network-Providers-Trips-2025-/6dvr-xwnh/about_data" target="_blank" rel="noopener"
>source&lt;/a>.
The so call &lt;a class="link" href="https://github.com/steffenaxer/iteratively-code-examples/blob/main/src/main/java/io/iteratively/matsim/PlansConverter.java" target="_blank" rel="noopener"
>PlansConverter&lt;/a> allows you to download and cache files day by day.
Moreover, trip demand gets transformed to MATSim compatible input.&lt;/p>
&lt;blockquote>
&lt;p>⚠️ Working on 12.5 GB csv can be a significant hurdle. That’s why I’ve created a &lt;a class="link" href="https://github.com/steffenaxer/iteratively-code-examples/blob/main/src/main/java/io/iteratively/matsim/PlansConverter.java" target="_blank" rel="noopener"
>PlansConverter&lt;/a> that lets you fetch data for selected days or entire weeks with ease.
You need to &lt;a class="link" href="https://data.cityofchicago.org/login" target="_blank" rel="noopener"
>register&lt;/a> in order to obtain an API token for my downloader.&lt;/p>&lt;/blockquote>
&lt;h2 id="-scope-of-analysis-intra-chicago-trips-only">📍 Scope of Analysis: Intra-Chicago Trips Only
&lt;/h2>&lt;p>It’s important to note that &lt;strong>pickup and dropoff coordinates are omitted&lt;/strong> whenever a trip starts or ends &lt;strong>outside the official boundaries of the City of Chicago&lt;/strong>. In such cases, fields like census tract, community area, and geolocation are left blank.&lt;/p>
&lt;p>As a result, this analysis focuses &lt;strong>exclusively on trips that both start and end within Chicago city limits&lt;/strong>. This ensures that all trips included in the simulation have valid spatial references and can be accurately mapped and analyzed. Origin and destination coordinates are represented by the census tract centroid.
I created a census tract coordinate sampler that draws random start and end coordinates within each tract area.&lt;/p>
&lt;p>By restricting the dataset to &lt;strong>intra-city trips&lt;/strong>, we can:&lt;/p>
&lt;ul>
&lt;li>Reliably reconstruct origin-destination flows&lt;/li>
&lt;li>Analyze demand patterns across community areas&lt;/li>
&lt;li>Simulate realistic operations within a well-defined urban service area&lt;/li>
&lt;/ul>
&lt;p>This scope also mirrors how autonomous ride-hailing services like Waymo typically operate — starting with clearly bounded service zones before expanding to broader regions.&lt;/p>
&lt;hr>
&lt;h2 id="-a-typical-week-of-ride-hailing-in-chicago">📊 A Typical Week of Ride-Hailing in Chicago
&lt;/h2>&lt;p>Before diving into the simulation study, let&amp;rsquo;s take a moment to explore the data. For this, I downloaded a &lt;strong>typical week of ride-hailing activity&lt;/strong> in Chicago via API access, covering the period from &lt;strong>June 2 to June 8 2025&lt;/strong>.&lt;/p>
&lt;p>This week includes a total of &lt;strong>888,610 trips&lt;/strong>.&lt;/p>
&lt;h3 id="-spatial-distribution">🗺️ Spatial Distribution
&lt;/h3>&lt;p>The spatial distribution of trips is shown in the image below:&lt;/p>
&lt;figure>&lt;img src="https://iteratively.io/p/drt-chicago/rides_count.png"
alt="Spatial Trips Distribution" width="700">
&lt;/figure>
&lt;p>As expected, demand hotspots include the &lt;strong>downtown area&lt;/strong> and especially the &lt;strong>airports&lt;/strong>, which show consistently high ride volumes.&lt;/p>
&lt;h3 id="-trip-distance-behavior">📐 Trip Distance Behavior
&lt;/h3>&lt;p>To better understand how far people travel, I visualized the distribution of trip distances:&lt;/p>
&lt;figure>&lt;img src="https://iteratively.io/p/drt-chicago/distance_distribution.png"
alt="Spatial Trips Distribution" width="700">
&lt;/figure>
&lt;p>As someone who prefers walking as little as possible, I was surprised — or maybe not — to see that the &lt;strong>American stereotype holds true&lt;/strong>: even the shortest distances, often &lt;strong>less than 2 km&lt;/strong>, are frequently covered by ride-hailing services.&lt;/p>
&lt;p>That said, it&amp;rsquo;s worth considering that &lt;strong>nighttime safety concerns&lt;/strong> may also play a role in this behavior, encouraging people to opt for a ride rather than walking through the city.&lt;/p>
&lt;h3 id="-tip-behavior-insights">💸 Tip Behavior Insights
&lt;/h3>&lt;p>Beyond trip volumes and distances, the dataset also offers &lt;strong>valuable insights into tipping behavior&lt;/strong> — something that’s often overlooked in ride-hailing analyses.
Since &lt;strong>Waymo vehicles don’t receive tips&lt;/strong>, understanding where human drivers earn the most in gratuities can reveal &lt;strong>potential pricing opportunities&lt;/strong> for autonomous fleets.&lt;/p>
&lt;p>I visualized the &lt;strong>spatial distribution of tip share&lt;/strong>, i.e., the proportion of the total fare that comes from tips. The results are intriguing:&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Airports&lt;/strong> stand out as areas where passengers tend to be more generous.&lt;/li>
&lt;li>&lt;strong>Downtown&lt;/strong> and the &lt;strong>northern parts of the city&lt;/strong> also show elevated tip shares.&lt;/li>
&lt;/ul>
&lt;p>This could imply that in these regions, Waymo might need to &lt;strong>adjust pricing&lt;/strong> to compensate for the lack of tips — especially if competing with human drivers.&lt;/p>
&lt;figure>&lt;img src="https://iteratively.io/p/drt-chicago/tip_share.png"
alt="Spatial Tip Distribution" width="700">
&lt;/figure>
&lt;blockquote>
&lt;p>💬 If you’re familiar with Chicago’s neighborhoods and have a hypothesis about these patterns, feel free to share your thoughts with me on &lt;a class="link" href="https://www.linkedin.com/in/steffenaxer" target="_blank" rel="noopener"
>LinkedIn&lt;/a>!&lt;/p>&lt;/blockquote>
&lt;h3 id="-tip-vs-trip-distance">📏 Tip vs. Trip Distance
&lt;/h3>&lt;p>After this spatial analysis, I was hooked and eager to see what else the data might reveal.
Another interesting finding: &lt;strong>shorter trips tend to have proportionally higher tips&lt;/strong> than longer ones.&lt;/p>
&lt;figure>&lt;img src="https://iteratively.io/p/drt-chicago/tip_share_vs_distance_km.png"
alt="Tip Share over Trip Distance" width="700">
&lt;/figure>
&lt;h3 id="-api-download-experience">🔄 API Download Experience
&lt;/h3>&lt;p>One practical note: downloading this data via API was noticeably faster on &lt;strong>weekends&lt;/strong>. During weekdays, the endpoint was heavily loaded and slow — something to keep in mind if you&amp;rsquo;re planning to automate data access.&lt;/p>
&lt;hr>
&lt;h2 id="-simulation-study-building-a-matsim-scenario-from-real-ride-hailing-data">🧪 Simulation Study: Building a MATSim Scenario from Real Ride-Hailing Data
&lt;/h2>&lt;p>Now comes the fun part — turning raw data into a working simulation. To do this, I’ve developed a modular pipeline using three key Java classes that together build a complete &lt;strong>MATSim scenario&lt;/strong> from the Chicago TNP dataset.&lt;/p>
&lt;h3 id="-disclaimer-a-simplified-simulation-perspective">⚠️ Disclaimer: A Simplified Simulation Perspective
&lt;/h3>&lt;p>This simulation study is a &lt;strong>simplified exploration&lt;/strong> of autonomous fleet deployment using MATSim and real-world ride-hailing data. While it provides valuable insights into demand patterns and operational feasibility, it does &lt;strong>not yet include several advanced modeling components&lt;/strong> that are essential for commercial-grade applications.&lt;/p>
&lt;p>MATSim is capable of simulating much more complex systems, including:&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Operational Facilities&lt;/strong>: Hubs with charging infrastructure and parking space limitations&lt;/li>
&lt;li>&lt;strong>Electric Vehicles (EVs)&lt;/strong>: Including battery consumption models and charging behavior&lt;/li>
&lt;li>&lt;strong>Service Tasks&lt;/strong>: Cleaning and maintenance&lt;/li>
&lt;li>&lt;strong>Congestion Replication&lt;/strong>: Integrating congestion pattern from HERE or TomTom&lt;/li>
&lt;/ul>
&lt;p>These elements significantly increase the complexity of the model and are crucial when building simulations for &lt;strong>real-world deployment, investment decisions, or regulatory planning&lt;/strong>.&lt;/p>
&lt;blockquote>
&lt;p>💬 I’d love to hear your thoughts! Feel free to comment on this post or reach out via LinkedIn — let me know what you&amp;rsquo;d like to see covered in the &lt;strong>next edition&lt;/strong> of this series.&lt;/p>&lt;/blockquote>
&lt;h3 id="-building-the-urban-road-network-networkconverter">🧱 Building the Urban Road Network (&lt;code>NetworkConverter&lt;/code>)
&lt;/h3>&lt;p>This class downloads and processes an &lt;strong>OpenStreetMap PBF file&lt;/strong> for the Chicago region. It clips the network to a bounding box, transforms coordinates to a local EPSG system, simplifies the network, and prepares it for &lt;strong>DRT simulation&lt;/strong> by adding the necessary transport modes.&lt;/p>
&lt;ul>
&lt;li>Uses &lt;code>SupersonicOsmNetworkReader&lt;/code> for fast parsing&lt;/li>
&lt;li>Applies &lt;code>NetworkSimplifier&lt;/code> to reduce complexity&lt;/li>
&lt;li>Adds &lt;code>drt&lt;/code> mode to all car-accessible links&lt;/li>
&lt;li>Outputs a clean MATSim network file (&lt;code>network.xml.gz&lt;/code>)&lt;/li>
&lt;/ul>
&lt;h3 id="-generating-agent-plans-from-real-trips-plansconverter">👥 Generating Agent Plans from Real Trips (&lt;code>PlansConverter&lt;/code>)
&lt;/h3>&lt;p>This class connects to the &lt;strong>City of Chicago’s TNP API&lt;/strong>, downloads trip data for a given date range, and converts each trip into a MATSim agent plan.&lt;/p>
&lt;ul>
&lt;li>Each trip becomes a &lt;code>Person&lt;/code> with a &lt;code>Plan&lt;/code> (home → drt leg → work)&lt;/li>
&lt;li>Includes attributes like &lt;code>fare&lt;/code>, &lt;code>tip&lt;/code>, &lt;code>trip_total&lt;/code>, and &lt;code>shared_trip_match&lt;/code>&lt;/li>
&lt;li>Supports sampling and census tract-based coordinate generation&lt;/li>
&lt;li>Outputs &lt;code>plans.xml.gz&lt;/code> and a CSV summary of all trips&lt;/li>
&lt;/ul>
&lt;h3 id="-orchestrating-the-full-scenario-scenariocreator">🧩 Orchestrating the Full Scenario (&lt;code>ScenarioCreator&lt;/code>)
&lt;/h3>&lt;p>This is the master class that ties everything together. It sets up directories, calls the network and plans converters, and generates a full MATSim &lt;code>config.xml&lt;/code> with all necessary modules.&lt;/p>
&lt;ul>
&lt;li>Configures DRT with advanced settings (e.g. parallel insertion, rebalancing, constraints)&lt;/li>
&lt;li>Generates a synthetic fleet (&lt;code>fleet.xml.gz&lt;/code>) based on network topology&lt;/li>
&lt;li>Sets simulation time, scoring parameters, and zone systems&lt;/li>
&lt;li>Outputs a ready-to-run MATSim scenario with real-world demand&lt;/li>
&lt;/ul>
&lt;p>With this setup, you can simulate how an autonomous fleet like Waymo might perform in Chicago — using actual demand data, realistic routing, and configurable fleet behavior.
Want to try it yourself? Try out the full &lt;a class="link" href="https://github.com/steffenaxer/iteratively-code-examples/tree/main/src/main/java/io/iteratively/matsim" target="_blank" rel="noopener"
>code&lt;/a> - If you need help. Feel free to reach out.&lt;/p>
&lt;hr>
&lt;h2 id="-results-how-many-vehicles-would-waymo-need">📈 Results: How Many Vehicles Would Waymo Need?
&lt;/h2>&lt;p>Almost like the cliffhanger in your favorite series — you’ve waited and wondered: &lt;em>How many vehicles would it take to serve all ride-hailing demand in Chicago with an autonomous fleet?&lt;/em>&lt;/p>
&lt;p>By gradually increasing the fleet size in simulation, we can estimate the number of vehicles required to keep the &lt;strong>rejection rate&lt;/strong> (i.e., unserved trip requests) around &lt;strong>10%&lt;/strong>. The following plot shows that approximately &lt;strong>3500 vehicles&lt;/strong> are needed to meet this threshold during peak demand
But that’s not the whole story. The &lt;strong>utilization of the fleet&lt;/strong> is highly uneven across the week. &lt;strong>Friday and Saturday evenings&lt;/strong> represent clear demand peaks, while the rest of the week shows significantly lower usage:&lt;/p>
&lt;figure>&lt;img src="https://iteratively.io/p/drt-chicago/occupancy_stackplot_weekday_time.png"
alt="Fleet Utilization over Time" width="700">
&lt;/figure>
&lt;p>This &lt;strong>utilization risk&lt;/strong> poses a serious economic challenge for autonomous operators like Waymo, Uber, or Lyft. Previously, this risk was absorbed by human drivers — now it shifts to the companies themselves.&lt;/p>
&lt;p>It’s likely that these providers will aim for a &lt;strong>hybrid operational model&lt;/strong>, where an autonomous fleet handles baseline demand and the human driven fleet is request &lt;strong>only during high-utilization periods&lt;/strong>. This would help mitigate the risk of underused assets and ensure a more sustainable business case.&lt;/p>
&lt;h2 id="-battery-sizing--daily-mileage-a-classic-question">🔋 Battery Sizing &amp;amp; Daily Mileage: A Classic Question
&lt;/h2>&lt;p>One of the most frequently asked technical questions in autonomous fleet planning is:&lt;br>
&lt;strong>How far does a vehicle need to drive per day?&lt;/strong>&lt;/p>
&lt;p>To answer this, I ran a simple analysis based on the simulated weekly demand.&lt;/p>
&lt;figure>&lt;img src="https://iteratively.io/p/drt-chicago/daily_distance_km.png"
alt="Daily Vehicle Mileage" width="700">
&lt;/figure>
&lt;p>The simulation revealed a mileage of &lt;strong>350 km per day&lt;/strong>. Such a workload has direct implications for:&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Battery sizing&lt;/strong>&lt;/li>
&lt;li>&lt;strong>Charging infrastructure&lt;/strong>&lt;/li>
&lt;li>&lt;strong>Fleet rotation and maintenance cycles&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>Especially for electric vehicles (EVs), this level of daily mileage requires robust energy management and operational planning.&lt;/p>
&lt;p>But it doesn’t stop at batteries:&lt;br>
🔧 &lt;strong>Other wear components&lt;/strong> such as tires, brakes, and suspension systems must also be dimensioned appropriately. High daily mileage leads to increased wear, and frequent repairs can quickly result in:&lt;/p>
&lt;ul>
&lt;li>Higher operational costs&lt;/li>
&lt;li>Increased fleet size requirements (to compensate for downtime)&lt;/li>
&lt;li>Reduced economic viability&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>💬 What do you think? Share your thoughts or hypotheses on LinkedIn — I’d love to hear what you&amp;rsquo;d explore in the next edition!&lt;/p>&lt;/blockquote>
&lt;hr>
&lt;div align="center">Stay tuned for the next iteration &lt;img src="https://iteratively.io/logo_iteratively_circle.svg" style="height:1.5em;position:relative;top:0.4em;padding-left:0.2em"> &lt;/div>
&lt;p>&lt;em>Author: Steffen Axer&lt;/em>&lt;/p></description></item></channel></rss>